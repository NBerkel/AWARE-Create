<template name="studyOverview">
  <h3 id="study-title">{{study.study_info.study_title}}</h3>

  {{> SingleQuestionnaireNav menuIdx="4"}}

  <div class="col-sm-9 input-form">
    <div class="panel panel-info">
      <div class="panel-heading clearfix">
        <h4>Study information</h4>
        <a href="/study/title" class="btn btn-default align-right" role="button">Edit study information</a>
      </div>
      <div class="panel-body">
        <div class="row">
          <label class="col-sm-4 control-label">Study title</label>
          <div class="col-sm-8">
            {{study.study_info.study_title}}
          </div>
        </div>
        <div class="row">
          <label class="col-sm-4 control-label">Study description</label>
          <div class="col-sm-8">
            {{study.study_info.study_description}}
          </div>
        </div>
      </div>
    </div>

    <div class="panel panel-info">
      <div class="panel-heading clearfix">
        <h4>Questions</h4>
        <a href="/study/questions" class="btn btn-default align-right" role="button">Edit questions</a>
      </div>
      <div class="panel-body">
        {{#each $ study.questions}}
        <div class="row">
          <label class="col-sm-4 control-label">Question {{getIndexWithOffset @index}}</label>
          <div class="col-sm-8">
            {{this.title}}
          </div>
        </div>

        <div class="row">
          <label class="col-sm-4 control-label">Instructions</label>
          <div class="col-sm-8">
            {{this.instructions}}
          </div>
        </div>

        <div class="row">
          <label class="col-sm-4 control-label">Question type</label>
          <div class="col-sm-8">
            {{getQuestionType this.type}}
          </div>
        </div>

        {{#unless $last}}<hr>{{/unless}}
        {{/each}}
      </div>
    </div>

    <div class="panel panel-info">
      <div class="panel-heading clearfix">
        <h4>Schedule configuration</h4>
        <a href="/study/schedule" class="btn btn-default align-right" role="button">Edit schedule configuration</a>
      </div>
      <div class="panel-body">
        {{#each $ study.schedules}}

        <div class="row">
          <label class="col-sm-4 control-label">Schedule {{getIndexWithOffset @index}}</label>
          <div class="col-sm-8">
            {{this.title}}
          </div>
        </div>

        <div class="row">
          <label class="col-sm-4 control-label">Questions</label>
          <div class="col-sm-8">
            <!--{{#each this.questions}}-->
            <!--{{#let schedulerIdx=this}}-->
            <!--{{#each study.questions}}-->
            <!--{{#if equals schedulerIdx @index}}-->
            {{this.questions}}<br/>
            <!--{{/if}}-->
            <!--{{/each}}-->
            <!--{{/let}}-->
            <!--{{/each}}-->
          </div>
        </div>

        <!--<div class="row">-->
          <!--<label class="col-sm-4 control-label">Configuration</label>-->
          <!--<div class="col-sm-8">-->
            <!--{{#each this.questionSchedule}}-->
            <!--{{#let schedulerIdx=this}}-->
            <!--{{#each study.questions}}-->
            <!--{{#if equals schedulerIdx @index}}-->
            <!--{{this.question}}<br/>-->
            <!--{{/if}}-->
            <!--{{/each}}-->
            <!--{{/let}}-->
            <!--{{/each}}-->
          <!--</div>-->
        <!--</div>-->

        {{#unless $last}}<hr>{{/unless}}
        {{/each}}
      </div>
    </div>

    <div class="panel panel-info">
      <div class="panel-heading clearfix">
        <h4>Sensor data</h4>
        <a href="/study/sensor" class="btn btn-default align-right" role="button">Edit sensor data</a>
      </div>
      <div class="panel-body">
        {{#each getSensors.sensor}}
          {{#if isSensorActive this}}
            <li>{{this.sensorType}}</li>
          {{/if}}
        {{/each}}
        <!-- TODO: Display informative message when no sensors are selected. -->
      </div>
    </div>

    <div>
      <!--<a href="/study/{{study._id}}/export" class="btn btn-primary btn-md pull-right" type="button">Distribute study</a>-->
      <a href="{{studyConfig}}" class="btn btn-primary btn-md pull-right" type="button" download="study-config.json">Download Study Config</a>
    </div>
  </div>

</template>
